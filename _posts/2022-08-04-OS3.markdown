---
layout: post
title: 듀얼 부팅 상태의 Ubuntu를 완전히 삭제하기
date: 2022-08-04 18:00:00 +0900
categories: OS
---
Windwos10 설치된 PC에서 Ubuntu를 듀얼 부팅으로 설치해서 오류 없이 잘 사용하고 있었는데, 메인보드 BIOS 업데이트를 했더니 한 방에 부팅이 안되는 황당한 상황이 발생했다. Ubunutu를 완전히 삭제하는 방법은 검색하면 많은 자료를 찾을 수 있는데, 내가 설치해서 사용했던 환경이 조금 특수했었기에 시행착오를 조금 겪었다. 그래서 내가 삭제한 과정을 정리해두려고 한다.

### 설치 환경
Windows10이 설치된 단일디스크 SSD에, 저장용 HDD를 마찬가지로 단일디스크로 할당하여 사용중이었다. Ubuntu 20.04 설치 USB를 만들어서 부팅했더니 듀얼 부팅 설치가 활성화되긴 했는데 자동적으로 저장용 HDD를 설치 드라이브로 잡아서 변경을 할 수 없었다. SSD가 아니다보니 속도가 조금 느리긴 했지만 사용에 지장은 없었는데, 서문에 적은대로 BIOS 업데이트 한 번에 양 쪽 모두 사용할 수 없는 상황에 처했다.

### Windows10으로 부팅 복구
내가 찾은 방법은 https://zuttee.tistory.com/entry/Windows-10-%EB%B6%80%ED%8C%85-%EC%9E%90%EB%8F%99-%EB%B3%B5%EA%B5%AC-%EC%95%88%EB%90%A0%EC%8B%9C-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95 이 포스트의 2번 방법이다. 설치/복구용 USB/DVD는 반드시 있어야 한다.

1. 설치/복구용 USB/DVD를 통해서 부팅
2. Windows 10 설치 화면에서 shift+F10 눌러서 명령 프롬프트 진입
3. diskpart를 사용해서 복구 디스크를 마운트
>diskpart    
>DISKPART>list vol    
>DISKPART>set vol 3(크기를 보고 몇 번 디스크가 복구 디스크인지 확인해야 한다)    
>DISKPART>assign letter=b:(빈 문자열을 지정해 준다. 어지간하면 b드라이브가 비어있을 것이다)    
>DISKPART>exit    
4. 복구 디스크로 이동하여 OS 정보를 복구하는 명령어 실행
>cd /d b:efi\microsoft\boot(b드라이브로 마운트 했을 때)    
>B:\EFI\Microsoft\Boot>bootrec /fixboot    
>B:\EFI\Microsoft\Boot>ren bcd bcd.bak    
>B:\EFI\Microsoft\Boot>bcdboot c:\windows /l ko-KR /s b: /f ALL    
5. 이후 exit 명령어로 빠져 나온 다음에 설치를 취소한 다음 재부팅되는 타이밍에 설치 USB/DVD를 제거하고 BIOS에 진입해서 부팅 디스크 순서를 다시 확인한다. 내 경우 여전히 OS는 잡히지 않았고 SSD, HDD, 우분투가 설치된 논리 드라이브만 검색되었으나 SSD를 0번으로 할당하자 정상적으로 Windows10 부팅에 성공했다.

### Ubuntu의 흔적 지우기
사실 이 포스트를 작성하게 된 가장 큰 이유다. 구글에 '듀얼 부팅 우분투 삭제'라고 검색하면 아마도 (https://jimnong.tistory.com/677)이곳과 (https://yerinpy73.tistory.com/6)이곳이 상단에 나올 것이다. bootice라는 프로그램을 사용해서 흔적을 완전히 삭제하라고 하는데, 잘 따라하면 깔끔하게 삭제가 가능할 것이다. 내 PC는 두 번째 링크에서 우분투가 설치된 파티션을 삭제하고 기존 파티션에 병합하는 부분을 실행할 수 없었다. 이유를 모르겠지만 디스크 관리(diskgmt.msc)로는 무슨 시도를 해도 드라이브를 삭제하고 병합할 수 없었다. bootice로도 안되서 꽤 오랫동안 이 문제를 해결할 수 없었는데, '우분투에서 sudo를 쓰는것 처럼 더 권한이 높은 관리 프로그램을 쓰면 되지 않을까'라는 생각에 검색을 해봤는데 그게 diskpart였다. 정답을 이미 알고 있었는데 그동안 시간낭비를 했다는 허무함에 억울함이 한동안 가시질 않았다. bootice를 통해서  우분투가 설치된 디스크를 삭제할 수 없다면 diskpart를 쓰면 된다. 만약 중요한 내용을 백업해두지 않았다면 반드시 디스크를 다른 PC에 연결하거나 우분투 설치 usb로 임시 부팅을 해서 내용을 백업해 두자.
1. windows키 + r(실행)에서 cmd 입력 또는 '명령 프롬프트' 검색
2. diskpart 실행
3. 디스크 선택 → 초기화 실행
>diskpart    
>list disk(용량을 통해 디스크를 확인)    
>SEL DISK 2(list에서 확인한 초기화할 디스크를 선택. 헷갈리면 두 번 세번 확인하자)    
>CLEAN(초기화)    
>EXIT(diskpart 종료)    
4. 디스크를 다시 할당하는 과정은 diskpart대신 디스크 관리에서 잡아주는게 편할 것이다.

### 후기
내가 맞은 문제는 두 가지였다. 부팅 자체가 안되었고, 남아있는 우분투의 흔적을 완벽하게 지울 수 없었던 것. 듀얼 부팅의 문제는 결국 우분투 삭제로 해결했다. 업데이트를 하면서 우분투 부팅을 인식하지 못해서 그런게 아닐까 추측할 뿐이다. 바이오스 업데이트가 정말 듀얼 부팅에 문제를 일으켰는지 나의 지식으로 확인할 수는 없지만 어쨌든 유지 보수 측면에서 듀얼 부팅이 그렇게 유리한 환경은 아니라는 생각을 하게 됐다. 그런 이유로 기존에 집에서 잠자고 있던 PC에 Windows를 삭제하고 우분투를 설치해서 개발용 PC로 사용하고 있다. 개발 작업을 위해 고사양 PC를 여러대 집에 구비하는 것은 낭비라고 생각해서 ubuntu와 관련된 키워드로 검색을 좀 해보니 WSL이라는 신기한 녀석을 알게 됐다. 이건 나중에 내가 취직을 하게 되면 Windows 기반으로 우분투와 얼마나 유사한 작업 환경을 보장하는지 직접 체크를 해볼 생각이다.

두 번째 문제는 답을 알고 있었지만 그걸 적용해 볼 생각을 못했었다. 포스트를 작성하면서 diskpart에 대해서 검색을 해보니 꼭 우분투 드라이브가 아니더라도 다양한 이유로 디스크 관리로는 파티션 삭제가 안되는 경우가 많은 듯 했다. 직접 적용되는 내용은 아니지만 리눅스나 MacOS에서 sudo의 필요성을 windows를 통해 배운 모양새가 됐다. 앞으로 작업환경을 구축할 때 참고해야겠다.