{"componentChunkName":"component---src-templates-blog-post-js","path":"/202/","result":{"data":{"site":{"siteMetadata":{"title":"ToyCon's Blog"}},"markdownRemark":{"id":"cfd43a86-7962-5bc7-ad13-b3f76834fdd7","excerpt":"이미지 관련 기능을 구현하는데 계속 에러가 났다. 컴파일 단계에서 에러가 나서 정상적으로 실행이 불가능해서 일단 에러 코드만 기록해놓고 다른 기능을 구현하고 있다. db쪽을 업데이트했는데 mongosh로 update…","html":"<p>이미지 관련 기능을 구현하는데 계속 에러가 났다. 컴파일 단계에서 에러가 나서 정상적으로 실행이 불가능해서 일단 에러 코드만 기록해놓고 다른 기능을 구현하고 있다. db쪽을 업데이트했는데 mongosh로 update 함수로 값을 업데이트하는 과정도 정상적으로 작동하지 않아서 이것도 힘들다.</p>\n<ol>\n<li>몽고db updateOne() 작동을 안함\n<ul>\n<li>글을 완전히 db에서 삭제하지 않고 isDeleted라는 항목을 별도로 생성, 서버에서 메시지를 받으면 해당 값을 true로 바꾸는 코드를 작성했으나 해당 기능이 작동하지 않음</li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> connectDB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">db</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"board\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">deleteOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">_id</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectId</span><span class=\"token punctuation\">(</span>_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// deletedCheck 항목으로 업데이트가 안되서 일단 스킵(7/20/15:40)</span>\n<span class=\"token comment\">// let result = await db.collection('post').</span>\n<span class=\"token comment\">//   updateOne({_id: new ObjectId(req.body._id)}, {$set: {deleteCheck: 1}});</span>\n<span class=\"token comment\">// console.log(result);</span></code></pre></div>\n<ol start=\"2\">\n<li><input> 태그에 이미지 삽입 기능 구현했을때 발생한 컴파일 에러 기록</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">wait  - compiling /write/page (client and server)...\nerror - ./node_modules/@mapbox/node-pre-gyp/lib/clean.js:8:0\nModule not found: Can't resolve 'fs'\n\nhttps://nextjs.org/docs/messages/module-not-found\n\nImport trace for requested module:\n./node_modules/@mapbox/node-pre-gyp/lib/ sync ^\\.\\/.*$\n./node_modules/@mapbox/node-pre-gyp/lib/node-pre-gyp.js\n./node_modules/bcrypt/bcrypt.js\n./pages/api/auth/[...nextauth].js\n./app/write/page.js</code></pre></div>","frontmatter":{"title":"TIL28","date":"July 20, 2023","description":"7월 20일 학습일지"}},"previous":{"fields":{"slug":"/201/"},"frontmatter":{"title":"TIL27"}},"next":null},"pageContext":{"id":"cfd43a86-7962-5bc7-ad13-b3f76834fdd7","previousPostId":"4fc3a5f5-4e5e-55e6-b47f-039311c3dd29","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}