{"componentChunkName":"component---src-templates-blog-post-js","path":"/165/","result":{"data":{"site":{"siteMetadata":{"title":"ToyCon's Blog"}},"markdownRemark":{"id":"5fd50517-d2bd-50ea-8277-48bda9f4e927","excerpt":"내가 처음에 소인수분해 문제를 풀면서 작성했던 코드는 이거였다(틀린 답이다). 제대로 작성한것 같은데, 계속 아래와 같은 오류가 발생했다. 처음에는 소수 여부를 판별하는 isPrime 함수가 잘못되었나 싶어서 아래 함수를 복사해서 붙여넣었더니 정상적으로 작동했다(https://velog…","html":"<p>내가 처음에 소인수분해 문제를 풀면서 작성했던 코드는 이거였다(틀린 답이다).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">solution</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">trunc</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> \n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">%</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> res <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">%</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>제대로 작성한것 같은데, 계속 아래와 같은 오류가 발생했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#\n# Fatal error <span class=\"token keyword\">in</span> <span class=\"token punctuation\">,</span> line <span class=\"token number\">0</span>\n# Fatal JavaScript invalid size error <span class=\"token number\">169220804</span>\n#\n#\n#\n#FailureMessage Object<span class=\"token operator\">:</span> <span class=\"token number\">0x7fff4a7255d0</span>\n <span class=\"token number\">1</span><span class=\"token operator\">:</span> <span class=\"token number\">0xb6ca81</span>  <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">2</span><span class=\"token operator\">:</span> <span class=\"token number\">0x1bef1a4</span> <span class=\"token function\">V8_Fatal</span><span class=\"token punctuation\">(</span>char <span class=\"token keyword\">const</span><span class=\"token operator\">*</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">3</span><span class=\"token operator\">:</span> <span class=\"token number\">0xe63268</span>  <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">4</span><span class=\"token operator\">:</span> <span class=\"token number\">0x1010b12</span>  <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">5</span><span class=\"token operator\">:</span> <span class=\"token number\">0x1011456</span>  <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">6</span><span class=\"token operator\">:</span> <span class=\"token number\">0x11d1b73</span> <span class=\"token literal-property property\">v8</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span>internal<span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token function\">Runtime_GrowArrayElements</span><span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">,</span> unsigned long<span class=\"token operator\">*</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">v8</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span>internal<span class=\"token operator\">:</span><span class=\"token operator\">:</span>Isolate<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">7</span><span class=\"token operator\">:</span> <span class=\"token number\">0x15d5439</span>  <span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span></code></pre></div>\n<p>처음에는 소수 여부를 판별하는 isPrime 함수가 잘못되었나 싶어서 아래 함수를 복사해서 붙여넣었더니 정상적으로 작동했다(<a href=\"https://velog.io/@loocia1910/javascript%EC%97%90%EC%84%9C-%EC%86%8C%EC%88%98Prime-number-%EA%B5%AC%ED%95%98%EA%B8%B0\">https://velog.io/@loocia1910/javascript%EC%97%90%EC%84%9C-%EC%86%8C%EC%88%98Prime-number-%EA%B5%AC%ED%95%98%EA%B8%B0</a>).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 음수와 1은 소수가 아니다</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 2는 짝수 중 유일한 소수이다</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> num <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">return</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token comment\">// 이제 num이 홀수 일때 다른 수에 나눠지는지 판별한다</span>\n  \n  <span class=\"token comment\">// Math.sqrt(num) 즉, √num까지 나눠 떨어지는지 검사한다</span>\n  <span class=\"token comment\">// 원리는 아래글 \"에라토스테네스의 체\" 참고</span>\n \n  <span class=\"token keyword\">const</span> sqrt <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> divider <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> divider <span class=\"token operator\">&lt;=</span> sqrt<span class=\"token punctuation\">;</span> divider <span class=\"token operator\">+=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">%</span> divider <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>내가 작성한 isPrime과 별 차이가 없다고 생각해서, 에러 메시지 자체를 검색하니 스택오버플로우 질문과 해당 질문의 답변을 한글로 번역한 포스트를 찾을수 있었는데, 심플한 오류 메시지 그대로 '메모리를 과하게 사용했다'가 결론이었다. 여기서 '메모리를 과하게 사용할 이유가 있나?' 싶어서 설마하는 마음에, 원래의 코드에서 isPrime함수의 for 반복문 변수명을 i에서 j로 바꿨다. 그랬더니 잘 작동한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">solution</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">trunc</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> \n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">%</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> res <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> sqrt <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">%</span> j <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>내 기억으론 분명히 변수의 범위는 함수 내부로 제한된다고 기억하고 있어서 같은 변수를 써도 된다고 생각했는데, 문제를 푸는 페이지 내부에서는 하나의 범위로 묶인 모양이다. 그래서 반복문마다 i가 계속 사용되는 바람에 메모리를 모두 점유하는 문제가 발생했다. 이 문제에 발을 좀 오래 묶여있어서, 앞으로 함수를 선언할 때 변수명도 겹치지 않게 잘 선택해야겠다는 교훈으로 마무리 지으려고 한다. 대신 변수 범위는 주말에 공부를 조금 해봐야겠다.</p>","frontmatter":{"title":"소인수분해 문제를 풀면서 발생했던 오류 파헤치기","date":"May 01, 2023","description":"https://school.programmers.co.kr/learn/courses/30/lessons/120852"}},"previous":{"fields":{"slug":"/163/"},"frontmatter":{"title":"TIL5"}},"next":{"fields":{"slug":"/164/"},"frontmatter":{"title":"소인수분해"}}},"pageContext":{"id":"5fd50517-d2bd-50ea-8277-48bda9f4e927","previousPostId":"294c9e47-5d16-5a74-ab6b-c3b0d971b79a","nextPostId":"5b0c02a6-f4d4-560c-9551-0a3971ced62e"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}