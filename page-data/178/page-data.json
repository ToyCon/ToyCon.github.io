{"componentChunkName":"component---src-templates-blog-post-js","path":"/178/","result":{"data":{"site":{"siteMetadata":{"title":"ToyCon's Blog"}},"markdownRemark":{"id":"8b86bcc3-05b3-548e-ba61-7f7198369ebc","excerpt":"몽고DB 연동 nextjs project 폴더에서 mongodb 라이브러리 설치 db와 연동을 담당하는 js 파일 하나 생성해서 아래 코드 실행 db에서 받아온 데이터를 실제로 활용할 페이지에서 connectDB 함수 호출해서 사용","html":"<ol>\n<li>몽고DB 연동\n<ul>\n<li>nextjs project 폴더에서 mongodb 라이브러리 설치</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install mongodb</code></pre></div>\n<ul>\n<li>db와 연동을 담당하는 js 파일 하나 생성해서 아래 코드 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { MongoClient } from 'mongodb'\nconst url = 'DB접속URL~~'\nconst options = { useNewUrlParser: true }\nlet connectDB\n\nif (process.env.NODE_ENV === 'development') {\n  if (!global._mongo) {\n     global._mongo = new MongoClient(url, options).connect()\n   }\n   connectDB = global._mongo\n} else {\n   connectDB = new MongoClient(url, options).connect()\n}\nexport { connectDB }</code></pre></div>\n<ul>\n<li>db에서 받아온 데이터를 실제로 활용할 페이지에서 connectDB 함수 호출해서 사용</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { connectDB } from \"/util/database.js\"\n\nfunction () {\n   let client = await connectDB;\n   const db = client.db('forum');\n   let result = await db.collection('post').find().toArray();\n   console.log(result);       \n}</code></pre></div>\n</li>\n</ol>","frontmatter":{"title":"TIL13","date":"May 18, 2023","description":"5월 18일 학습일지"}},"previous":{"fields":{"slug":"/177/"},"frontmatter":{"title":"TIL12"}},"next":{"fields":{"slug":"/179/"},"frontmatter":{"title":"TIL14"}}},"pageContext":{"id":"8b86bcc3-05b3-548e-ba61-7f7198369ebc","previousPostId":"ff8260e3-c847-5959-8780-992d7cf34533","nextPostId":"8ca08e74-a46a-5e12-aae9-6fb6460f0890"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}